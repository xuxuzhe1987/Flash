<h1 class="text-center">My Profile</h1>
<div class="text-center">
  <%= link_to "Add New Deck", new_deck_path, class: "btn btn-primary" %>
  <h3> My Decks:</h3>

<!-- need iteration to show the user created decks -->
</div>
<h3 class="text-center m-2">My On Going Decks:</h3>
<div class="container">
  <ul class="list-group">
    <% @user_decks.each do |user_deck| %>
    <%= @user_cards_known %>
    <div class="card border border-dark m-2">
      <div class="card-header">
        <i class="fas fa-angle-double-right"></i>
        Deck: <%= user_deck.deck.name %>
      </div>
      <button id="details-btn" class="btn btn-primary btn-sm m-2" onClick="showDetails()">See Details</button>
      <div id="show-status" class="details-container hidden">
      <li class="list-group-item">Status: <%= user_deck.status %></li>
      <li class="list-group-item">Known cards: <%= @user_cards.select{|user_card| user_card.card.deck_id == user_deck.deck_id}.count{|user_card| user_card.result == true} %></li>
      <li class="list-group-item">Unknown cards: <%= @user_cards.select{|user_card| user_card.card.deck_id == user_deck.deck_id}.count{|user_card| user_card.result == false} %></li>
      </div>
      <div class="d-flex justify-content-around m-2">
      <%= link_to "Continue", user_deck_path(user_deck), class:"btn btn-primary btn-sm"%>
      <%= link_to "Delete History", user_deck_path(user_deck), method: :delete, id:"delete-link", class:"btn btn-danger btn-sm" %>
      </div>
    </div>
    <% end %>
  </ul>
</div>

<script type="text/javascript">
  function showDetails() {
    const details = document.querySelectorAll(".details-container")
    details.forEach(e => e.classList.toggle("hidden"))

  }
</script>

<i class="fas fa-forward"></i>
<i class="far fa-edit"></i>
<i class="far fa-trash"></i>
<i class="fas fa-eye"></i>
<i class="fas fa-eye-slash"></i>
