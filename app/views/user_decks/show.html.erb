<h1><%= @user_deck.deck.name %></h1>

 <div class="card-container swiper-container mySwiper">
    <div class="swiper-wrapper">
      <% @user_deck.deck.cards.each_with_index do |card, i|%>
  <div id="card-<%= i %>" class="card swiper-slide" style="display: block;">
    <p class="question" style="dispaly: block;"><%= card.question %></p><br>
    <hr><br>
    <div class="answer hidden">
      <div><%= card.answer %> </div>
    </div>
    <div class="text-box hidden mb-3">
      <form>
          <input type="text">
          <input type="submit">
      </form>
    </div>
    <div class="hint hidden">
      <div><%= card.hint %> </div>
    </div>
    <div id ="activeCardButtons">
      <button id="flip" type="button" value="Flip" onclick="flip()">Flip</button>
      <button id="next" onclick="nextCard()">Next Card </button>
      <button id="hint" type="button" value="hint" onClick="hint()"> Hint </button>
      <button id="user-answer" type="button" value="Type your Answer" onClick="add()"> Answer Me? </button>
    </div>
      <br>
    </div>

    <% end %>
    </div>
  </div>


<script type="text/javascript">
  var swiper = new Swiper(".mySwiper", {
    allowSlidePrev: false
  });
  console.log("testing", swiper)
  let currentIndex = 0
  let nextIndex = 1
  let cards = document.querySelectorAll(".card")

  let current = document.getElementById(`card-${currentIndex}`)
  current.style.display = "block"

  let next = document.getElementById(`card-${nextIndex}`)

  let questions = document.querySelectorAll(".question")
  let answers = document.querySelectorAll(".answer")
  let hints = document.querySelectorAll(".hint")

  function nextCard() {
    answers.forEach(e => e.classList.add("hidden"))
    questions.forEach(e => e.classList.remove("hidden"))
    current.style.display = "none"
    next.style.display = "block"
    current = next
    currentIndex = currentIndex === (cards.length - 1) ? 0 : currentIndex + 1
    nextIndex = nextIndex === (cards.length - 1) ? 0 : nextIndex + 1
    next = document.getElementById(`card-${nextIndex}`)
  }

  function flip() {
    answers.forEach(e => e.classList.toggle("hidden"))
  }

  function hint() {
    hints.forEach(e => e.classList.toggle("hidden"))
  }

  function add() {

   userAnswers = document.querySelectorAll(".text-box")
   userAnswers.forEach(e => e.classList.toggle("hidden"))

  }
</script>


